---
title: Linux视频教程第4、5、6讲.文件权限.用户组

date: 2017-04-12 21:14:00

categories:
- Linux

tags:
- Linux

---

## 用户组

在Linux中的**每个用户必须属于一个组**，不能独立于组外。在Linux中每个文件有所有者、所在组、其它组的概念

**所有者**

一般为文件的创建者，谁创建了该文件，就天然的成为该文件的所有者 
用ls ‐ahl命令可以看到文件的所有者
也可以使用chown 用户名文件名来修改文件的所有者

**文件所在组**

当某个用户创建了一个文件后，这个文件的所在组就是该用户所在的组 
用ls ‐ahl命令可以看到文件的所在组

也可以使用chgrp组名文件名来修改文件所在的组 

**其它组**

除开文件的所有者和所在组的用户外，系统的其它用户都是文件的其它组

## 文件权限 

![这里写图片描述](http://img.blog.csdn.net/20160211221716925)

<pre>
10个字符确定不同用户能对文件干什么

<font color='blue'>第一个字符代表文件（-）、目录（d），链接（l）</font>
[b]则表示为装置文件里面的可供储存的接口讴备(可随机存取装置)
[c]则表示为装置文件里面的串行端口讴备，例如键盘、鼠标(一次性读取装置)

其余字符每3个一组（rwx），读（r）、写（w）、执行（x）

第一组rwx：文件所有者的权限是读、写和执行
第二组rw-：与文件所有者同一组的用户的权限是读、写但不能执行
第三组r--：不与文件所有者同组的其他用户的权限是读不能写和执行

也可用数字表示为：r=4，w=2，x=1 因此rwx=4+2+1=7 注意：最大权限777

注意：
● 文件夹x为进入文件下的权限
● <font color='blue'>开放目录给任何人浏览时，应该至少也要给予r及x的权限</font>
● x在目录当中是与"能否进入该目录"有关，至于那个w则具有相当重要的权限，因为他可以让使用者删除、更新、新建档案或目录
</pre>

## 文件预设权限

    鸟哥Linux私房菜 p223
    
    查询的方式有两种，一种是直接输入umask，看到数字形态的权限设置分数；另一种则是加入-S(Symbolic)选项，就会以符号类型的方式来显示出权限
    
    文件预设没有x权限，即只有rw两个选项，最大666分，-rw-rw-rw-
    目录默认所有权限均开放，即777分，drwxrwxrwx
    
    umask的分数指的是默认值减掉的权限。r=4，w=2，x=1。要拿掉写的权限，输入2，拿掉度的权限，输入4等
    例，umask为022，所以user没有拿掉任何权限，group与others权限拿掉2，也就是w权限，所以，建立文件时权限为-rw-r--r--，建立文件夹时drwxr-xr-x
    
    专题制作，要求同一组的用户能够修改，只要umask 002就行


## 档案特殊权限

![这里写图片描述](http://img.blog.csdn.net/20160404154355875)
![这里写图片描述](http://img.blog.csdn.net/20160404161157245)
![这里写图片描述](http://img.blog.csdn.net/20160404154501110)

    档案的重要权限除了rwx（读、写、执行），还有其他特殊权限（s跟t）。s和t权限的意义与系统的帐号（第十四章）及系统的程序（第十七章）相关。
    
    s这个表示根据出现位置的不同，可分为SUID和SGID：
    
    1、s标志出现在档案拥有者的x权限上时，如passwd，称为Set UID，简称SUID的特殊权限。SUID的限制和功能：
        ● 仅对二进制程序有效
        ● 执行者对该程序具有x的可执行权限★★★
        ● 本权限仅在该程序的运行时 ★★★
        ● 执行者将具有程序拥有者的权限 ★★★
        （自己的话：用户对二进制程序有可执行权利，在程序运行时，暂时获得该程序拥有者的权限）
        
    问题：所有帐号密码都记录在/etc/shadow，这个档案只有root可以修改，但个人用户的帐号显然能够修改自己的密码，问什么？
    答：passwd是一个二进制程序，个人用户对/usr/bin/passwd有x权限，用户在执行passwd的过程中，会暂时获得程序所有者[root]的权限的，对密码进行修改
    
    2、s标志出现在文件所在组的x权限上时，成为Set GID，SGID的功能：
        ● SGID对二进制程序有用
        ● 程序执行者对该程序有x权限
        ● 执行者在执行过程中会获得该程序群组的支持
    
    当使用个人账户去执行locate时，会取得slocate群组的支持，就能够读取mlocate.db
    
    3、SBIT，Stick Bit仅对当前目录有效，作用：
        ● 当用户对于此目录具有w、x权限
        ● 当用户在该目录下建立档案或目录时，仅自己与root有权利删除该档案
    
    /tep任何人都能够在/tmp内新增、修改档案，但仅文件的建立者或root能够删除该文件

```
SUID、SGID、SBIT权限设定

设定的方法是在原先数字更改权限方式前再加上一个数字
● SUID 4
● SGID 2
● SBIT 1

例将一个文件权限设为[-rws r-x r-x]，这里s标志出现在文件所有者的x权限位置，所以是SUID
chmod 4755 # 加入SUID
chmod 6755 # 加入SUID和SGID
chmod 1755 # 加入SBIT
chmod 7666 # 出现-rwSrwSrwT，因为下达7666，user、group、other都没有x权限，那么这个S、T代表空（因为SUID是文件执行时，获得文件所有者的权限，但连文件所有者都无法执行了，哪来的权限给其他人使用）
```

## 权限与指令的关系

    1、进入目录：
        可用命令如cd，用户对这个目录至少需要x权限，如果还要在这个目录利用ls查阅文件名，用户还需要对这个目录具有r权限
    2、在目录中读取一个文件
        可使用指令cat，more，less等，用户对这个目录至少需要x权限，对文件需要有r权限
    3、修改一个文件
        使用vim编辑器等，需要对该文件的目录有x权限，对文件有r和w权限
    4、进入某个目录并执行该目录下的某个指令
        用户对目录有x权限，对该文件有x权限
    
## atime、mtime、ctime 

时间参数意义

![这里写图片描述](http://img.blog.csdn.net/20160404164411648)

    ● +4代表大于等于5天前的文件 find /var -mtime +4
    ● -4代表小于等于四天内的文件 find /var -mtime -4
    ● 4代表4-5那一天的文件 find /var -mtime 4
    
差别 

    ● ctime是指change time
    ● mtime, 就是modify time
    
    mtime和ctime的区别在于，只有修改了文件的内容，才会更新文件的mtime，而对文件更名，修改文件的属主等操作，只会更新ctime。
    
    举例说明: 对文件进行mv操作，mtime不变，ctime更新；编辑文件内容，mtime和ctime同时修改。其他操作的影响，可以自己试验。但是我发现对文件执行touch操作，会同时修改mtime和ctime，所以具体修改哪个时间，还取决于不同命令自己的实现；

    atime, 这个就是每次查看文件内容的时候会更新。比如cat操作，而ls操作是不会更新的。