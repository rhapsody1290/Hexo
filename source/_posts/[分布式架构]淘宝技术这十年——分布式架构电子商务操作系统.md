---
title: 淘宝技术这十年——分布式架构电子商务操作系统.md

date: 2017-02-27 15:08:00

categories:
- 分布式架构

tags:
- 分布式架构
- 淘宝技术这十年

---

## 服务化

**本质是模块划分，每一个模块有特定的职责，这样做的好处可以做到系统解耦，方便维护**

当系统大到一定程度时，系统越来越臃肿，业务的耦合性越来越高，开发效率低下，你写一段代码编译一下要半天；业务耦合大，修改一些代码影响别处的正确使用

比如可以划分为核心模块、登录模块、短信模块等基本模块，系统这么拆分的好处：

* 每个系统可以单独部署，业务简单，方便扩容
* 有大量的可重用的模块可以**复用，便于维护**
* 能够做到专人专事，让技术人员更加专注于一个领域

拆分后的系统如何通信？需要两种中间件系统，**一种是实时调用的中间件（淘宝的HSP，高性能服务框架），一种是异步消息通知的中间件（淘宝的Notify）**

## 中间件

淘宝HSF框架是一个分布式的标准Service方式的RPC（远程过程调用）框架，Service的定义是基于OSGI的方式，通讯层采用TCP/IP协议

消息中间件Notify：为了保证消息一定能够通知到，把要发出的通知存放到**数据库**中，如果实时发送失败，再用一个时间程序来**周期性**得发送这些通知，**系统记下消息的中间状态和时间戳**，这样保证**消息一定能够发出，也一定能够通知到**

分布式数据访问层TDDL：让上层用户操作一个数据库一样操作多个库，TDDL主要实现了三个主要特性
1、数据访问路由，将数据的读写请求发送到合适的地方 
2、数据复制，一次写入多点读取
3、数据存储的自由扩展

## Session框架

Http协议是无状态的，需要通过Session来解决服务器和浏览器的保持状态

要不用客户端Cookie来解决问题，要不用服务端的集中缓存区（Tair）的Session来解决登录问题

